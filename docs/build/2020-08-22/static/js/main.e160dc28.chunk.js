(this["webpackJsonpnew-frontend"]=this["webpackJsonpnew-frontend"]||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){},239:function(e,t,n){},241:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){"use strict";n.r(t);var a,o,i,r,s,c=n(0),l=n.n(c),u=n(66),m=n.n(u),d=(n(74),n(17)),p=n(3),b=n(7),f=n(8),h=n(13),E=n(12),g=n(4),v=n(14),N=(n(75),n(10)),y=n(24);!function(e){e.UNTYPED_LAMBDA="UNTYPED_LAMBDA",e.LISP="LISP",e.MARKDOWN="MARKDOWN"}(a||(a={})),function(e){e[e.MAIN=0]="MAIN",e[e.HELP=1]="HELP",e[e.SETTINGS=2]="SETTINGS",e[e.NOTEBOOKS=3]="NOTEBOOKS"}(o||(o={})),function(e){e.INIT="Type \u03bb (as \\) expression and hit enter",e.EVAL_MODE="Hit enter for next step",e.VALIDATE_MODE="Write next step and hit enter for validation",e.MACRO="Define Macro like: `NAME := [\u03bb expression]` and hit enter",e.NOTE="Type note and hit shift enter"}(i||(i={})),function(e){e[e.EMPTY=0]="EMPTY",e[e.ORDINARY=1]="ORDINARY",e[e.EXERCISE=2]="EXERCISE"}(r||(r={})),function(e){e.NORMAL="Normal Evaluation",e.APPLICATIVE="Applicative Evaluation",e.OPTIMISATION="Optimisation - \u03b7 Conversion",e.ABSTRACTION="Abstraction / Simplified Evaluation"}(s||(s={}));var x=n(2),k=n(9),S=n(67),O=function(){function e(t){Object(b.a)(this,e),this.roots=t,this.translator=new Map,this.equals=!0,this.context=void 0;var n=t,a=Object(S.a)(n);this.context=a.slice(0),this.compare()}return Object(f.a)(e,[{key:"compare",value:function(){var e=Object(N.a)(this.context,2),t=e[0],n=e[1];if(t instanceof x.Lambda&&n instanceof x.Lambda){var a=new Map(this.translator.entries());this.translator.set(t.argument.name(),n.argument.name()),this.context=[t.right,n.right],this.compare(),this.translator=a}else if(t instanceof x.Application&&n instanceof x.Application){if(this.context=[t.left,n.left],this.compare(),!this.equals)return;this.context=[t.right,n.right],this.compare()}else t instanceof x.Macro&&n instanceof x.Macro||t instanceof x.ChurchNumeral&&n instanceof x.ChurchNumeral?this.equals=t.name()===n.name():t instanceof x.Variable&&n instanceof x.Variable?this.translator.has(t.name())?this.equals=this.translator.get(t.name())===n.name():this.equals=t.name()===n.name():this.equals=!1}}]),e}(),_={macrotable:{}},A="UNTYPED_LAMBDA_CALCULUS",B={type:a.UNTYPED_LAMBDA,SLI:!1,expandStandalones:!1,strategy:s.NORMAL,SDE:!1};function j(e){return function(e){var t=e;if(""===t.expression)return t;var n=Object(x.decodeFast)(t.ast);if(null===n)throw"ROOT AST IS NOT DECODABLE";return t.ast=n,t.history=t.history.map((function(e,t){var n=Object(x.decodeFast)(e.ast);if(null===n)throw"CURRENT STEP IS NOT DECODABLE "+t;var a=e.lastReduction;return void 0===e.lastReduction&&(a=null),Object(p.a)({},e,{lastReduction:a,ast:n})})),t}(e)}var L={SLI:!0,expandStandalones:!0,strategy:!0};function w(e,t,n){var a=new(T(t))(e),o=a.nextReduction;if(a.nextReduction instanceof x.None)return[o,function(e){return e}];if(o instanceof x.Expansion&&o.target instanceof x.ChurchNumeral){console.log("_________________________________ CHURCH NUMERAL EXPANSION");var i=w(a.perform(),t,n),r=Object(N.a)(i,2),c=r[0];r[1];return c instanceof x.None?(console.log("_________________________________ rule I. INSIDE EXPANSION"),[c,function(e){return e}]):(console.log("_________________________________ CHURCH EXPAND -- INSIDE EXPANSION"),[o,function(e){return e}])}if(!(o instanceof x.Expansion&&o.target instanceof x.Macro))return console.log("_________________________________ just normal stuff"),[o,function(e){return a.perform()}];var l=function(){console.log("_________________________________ MACRO EXPANSION");var i=o.parent,r=o.treeSide,c=o.target,l=(o.type,c.clone()),u=a.perform(),m=null!==i&&null!==r?i[r].clone():u.clone(),p=w(u,t,n),b=Object(N.a)(p,2),f=b[0],h=b[1];if(f instanceof x.None)return console.log("_________________________________ rule I. INSIDE EXPANSION"),{v:[f,function(e){return e}]};if(null!==i&&null!==r&&function e(t,n){if(n.type===x.ASTReductionType.ALPHA){var a=n;if(Array.from(a.conversions).some((function(e){return t.identifier===e.identifier})))return!0}else if(n.type===x.ASTReductionType.BETA){var o=n;if(null!==o.treeSide&&null!==o.parent&&t.identifier===o.parent[o.treeSide].identifier)return!0}else if(n.type===x.ASTReductionType.ETA){var i,r=n;if(t.identifier===(null===(i=r.parent)||void 0===i?void 0:i.identifier))return!0}else if(n.type===x.ASTReductionType.EXPANSION){var s=n;if(t.identifier===s.target.identifier)return!0}return(t instanceof x.Application||t instanceof x.Lambda)&&(e(t.left,n)||e(t.right,n))}(m,f))return console.log("_________________________________ rule III. INSIDE EXPANSION"),{v:[o,function(e){return a.perform()}]};var E=f;if(null!==i&&null!==r&&i instanceof x.Application&&i[r]instanceof x.Lambda&&E.redex.left.identifier===i[r].identifier&&f.type===x.ASTReductionType.BETA&&i.identifier===E.redex.identifier){console.log("_________________________________ rule IV. INSIDE");var g=function e(t){return t instanceof x.Lambda?[t.left.name()].concat(Object(d.a)(e(t.right))):[]}(i[r]).length;console.log("arity of the macro is: ",g);var v=function(e,t,n){var a=new C(e,t,n);return new I(a.applications,a.parents,e)}(g,i,e);if(t===s.APPLICATIVE||["*","+","/","-","ZERO"].includes(l.name())){console.log("............................. MACRO "+l.name()+"   has APPLICATIVE OVERRIDE");var y=!0,S=!1,O=void 0;try{for(var _,A=function(){var e=_.value,a=w(e.right,t,n),o=Object(N.a)(a,2),s=o[0],c=o[1];return s instanceof x.None?"continue":{v:{v:[s,function(t){return e.right=c(e.right),i[r]=l,t}]}}},B=v.applications[Symbol.iterator]();!(y=(_=B.next()).done);y=!0){var j=A();switch(j){case"continue":continue;default:if("object"===typeof j)return j.v}}}catch(L){S=!0,O=L}finally{try{y||null==B.return||B.return()}finally{if(S)throw O}}}return{v:[v,function(e){var a=null,o=null,i=!0,r=!1,s=void 0;try{for(var c,u=v.applications[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var m=c.value,d=v.parents.shift(),p=void 0===d?null:d.left.identifier===m.identifier?k.Child.Left:k.Child.Right,b=new(T(t))(m);b.reducer.perform();var f=b.reducer.tree;void 0===d||null===p?(d=null,p=null,a=e=f):(d[p]=f,a=d[p]),o=d}}catch(L){r=!0,s=L}finally{try{i||null==u.return||u.return()}finally{if(r)throw s}}if(function(e){if(["ZERO","-","*","+","/"].includes(e.name()))return!0;return!1}(l)){if(null===a)throw"This is bad, real bad.";if(null===o)for(;;){var h=w(e,t,n),E=Object(N.a)(h,2),g=E[0],y=E[1];if(g instanceof x.None)return R(e,n);e=y(e)}else for(var S=o.left.identifier===a.identifier?k.Child.Left:k.Child.Right;;){var O=w(a,t,n),_=Object(N.a)(O,2),A=_[0],B=_[1];if(A instanceof x.None)return o[S]=R(a,n),e;a=B(a)}}return e}]}}return console.log("_________________________________ rule II. INSIDE THIS IS FALLBACK"),console.log(f.type),{v:[f,function(e){var t=h(u);return i[r]=l,t}]}}();return"object"===typeof l?l.v:void 0}function R(e,t){if(function(e){if(!(e instanceof x.Lambda))return!1;if(!(e.body instanceof x.Lambda))return!1;return function e(t,n,a){if(a instanceof x.Variable&&a.name()===n)return!0;if(a instanceof x.Application&&a.left.toString()===t)return e(t,n,a.right);return!1}(e.argument.name(),e.body.argument.name(),e.body.body)}(e)){var n=function(e){var t=e.argument.name(),n=(e.body.argument.name(),e.body.body.toString().match(RegExp(t,"g")));return null===n?0:n.length}(e),a=function(e){return[e.argument.name(),e.body.argument.name()]}(e),o=Object(N.a)(a,2),i=o[0],r=o[1];return 0===n&&"s"===i&&"z"===r?Object(x.parse)(Object(x.tokenize)("0",{lambdaLetters:["\u03bb"],singleLetterVars:!1}),t):0===n&&"t"===i&&"f"===r?Object(x.parse)(Object(x.tokenize)("F",{lambdaLetters:["\u03bb"],singleLetterVars:!1}),t):Object(x.parse)(Object(x.tokenize)("".concat(n),{lambdaLetters:["\u03bb"],singleLetterVars:!1}),t)}for(var s=0,c=[].concat(Object(d.a)(Object.entries(x.builtinMacros)),Object(d.a)(Object.entries(t)));s<c.length;s++){var l=Object(N.a)(c[s],2),u=l[0],m=l[1],p=Object(x.tokenize)(m,{lambdaLetters:["\u03bb"],singleLetterVars:!1}),b=Object(x.parse)(p,t);if(new O([e,b]).equals)return Object(x.parse)(Object(x.tokenize)(u,{lambdaLetters:["\u03bb"],singleLetterVars:!1}),t)}return e}var I=function e(t,n,a){Object(b.a)(this,e),this.applications=t,this.parents=n,this.arity=a,this.type=x.ASTReductionType.GAMA},C=function(e){function t(e,n,a){var o;return Object(b.a)(this,t),(o=Object(h.a)(this,Object(E.a)(t).call(this))).arity=e,o.basepoint=n,o.parents=[],o.applications=[],o.found=!1,a.visit(Object(g.a)(o)),o}return Object(v.a)(t,e),Object(f.a)(t,[{key:"onApplication",value:function(e){return e.identifier===this.basepoint.identifier?(this.applications.push(e),void(this.found=!0)):(e.left.visit(this),this.found&&e.left.identifier===this.applications[this.applications.length-1].identifier?(this.arity>this.applications.length&&this.applications.push(e),void this.parents.push(e)):(e.right.visit(this),void(this.found&&e.right.identifier===this.applications[this.applications.length-1].identifier&&this.parents.push(e))))}},{key:"onLambda",value:function(e){e.right.visit(this),this.found&&e.right.identifier===this.applications[this.applications.length-1].identifier&&this.parents.push(e)}},{key:"onChurchNumeral",value:function(e){}},{key:"onMacro",value:function(e){}},{key:"onVariable",value:function(e){}}]),t}(x.ASTVisitor);function T(e){switch(e){case s.NORMAL:return x.NormalEvaluator;case s.APPLICATIVE:return x.ApplicativeEvaluator;case s.OPTIMISATION:return x.OptimizeEvaluator;case s.ABSTRACTION:return x.NormalAbstractionEvaluator}}var D=[a.UNTYPED_LAMBDA,a.LISP,a.MARKDOWN],M=[a.UNTYPED_LAMBDA,a.MARKDOWN];var P={boxList:[],activeBoxIndex:NaN,focusedBoxIndex:void 0,allowedBoxes:M,settings:function(e){var t={};-2===e?e=[]:-1===e&&(e=D);var n=!0,o=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){switch(r.value){case a.UNTYPED_LAMBDA:t=Object(p.a)({},t,Object(y.a)({},A,B))}}}catch(c){o=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return t}(M),integrationStates:{UNTYPED_LAMBDA:_},locked:!1,menuOpen:!1,__key:Date.now().toString(),name:"Default Ntbk",editingName:!1,persistent:!0},F={notebookList:[P],currentNotebook:0,currentScreen:o.MAIN};function U(){for(var e=Object(y.a)({},A,{}),t=window.localStorage.getItem("global-settings"),n=null===t?e:JSON.parse(t),a=0,o=Object.entries(n);a<o.length;a++){var i=Object(N.a)(o[a],2),r=i[0],s=i[1];switch(r){case A:n[r]=Object(p.a)({},B,{},s);break;default:console.error("Settings CODE NAME is not one of known Code Names.")}}return n}function Y(){var e=localStorage.getItem("AppState");if(null===e)return localStorage.setItem("AppState",JSON.stringify(F)),F;try{return function(e){var t=e.notebookList.map(V);return Object(p.a)({},e,{notebookList:t})}(JSON.parse(e))}catch(t){return F}}function W(e){localStorage.setItem("AppState",JSON.stringify(e))}function K(e,t){var n=Y();n.notebookList[t]=e,W(n)}function V(e){var t=e.boxList.map((function(e,t,n){switch(e.type){case a.UNTYPED_LAMBDA:return j(e);default:return e}}));return Object(p.a)({},e,{boxList:t})}n(111);function z(e){var t=e.state,n=e.onImport,a=e.onClearWorkspace,i=e.onScreenChange,r=t.currentNotebook,s=t.notebookList,c=t.currentScreen,u=s[r],m=u.name,d=function(e){var t=new Blob([e],{type:"application/json"});return window.URL.createObjectURL(t)}(JSON.stringify(u));return l.a.createElement("div",{className:"top-bar"},l.a.createElement("div",{className:"cursor-pointer top-bar--notebook-name-container",onClick:function(){return i(o.MAIN)}},l.a.createElement("span",{className:"top-bar--notebook-name"},m)),l.a.createElement("span",{className:"top-bar--item-container"},l.a.createElement("span",{className:c===o.SETTINGS?"top-bar--item top-bar--item-hoverable top-bar--item-hoverable--active":"top-bar--item top-bar--item-hoverable",title:"Go to the Settings",onClick:function(){c===o.SETTINGS?i(o.MAIN):i(o.SETTINGS)}},l.a.createElement("i",{className:"top-icon fas fa-cogs"}),l.a.createElement("p",{className:"top-bar--icon-label"},"Settings")),l.a.createElement("span",{className:"top-bar--item top-bar--item-hoverable",title:"Clear the Whole Workspace",onClick:a},l.a.createElement("i",{className:"top-icon fas fa-eraser"}),l.a.createElement("p",{className:"top-bar--icon-label"},"Clear All")),l.a.createElement("a",{className:"export",href:d,download:"notebook_lambdulus.lus",onClick:function(){return setTimeout((function(){}),10)}},l.a.createElement("span",{className:"top-bar--item top-bar--item-hoverable",title:"Download this Notebook"},l.a.createElement("i",{id:"download",className:"top-icon fas fa-cloud-download-alt"}),l.a.createElement("p",{className:"top-bar--icon-label"},"Export"))),l.a.createElement("input",{type:"file",accept:".lus",id:"input",onChange:function(e){return function(e,t){var n=e.target.files;if(null===n)return;var a=n[0],o=new FileReader;o.onload=function(e){var n=JSON.parse(o.result);t(V(n))},o.readAsText(a)}(e,n)}}),l.a.createElement("label",{htmlFor:"input"},l.a.createElement("span",{className:"top-bar--item top-bar--item-hoverable",title:"Import a Notebook from Computer"},l.a.createElement("i",{className:"top-icon fas fa-cloud-upload-alt"}),l.a.createElement("p",{className:"top-bar--icon-label"},"Import")))))}n(112);function X(e){var t=e.state,n=e.onScreenChange,a=t.currentScreen;return l.a.createElement("div",{id:"menu-bar"},l.a.createElement("div",{className:"tab",title:"Get Info about this Tool",onClick:function(){}},l.a.createElement("span",{className:"lambdulusIcon"},"\u03bb"),l.a.createElement("p",{className:"iconLabel"},"Lambdulus")),l.a.createElement("div",{className:a===o.NOTEBOOKS?"currentTab tab tab-hoverable":"tab tab-hoverable",title:"Show All Notebooks",onClick:function(){return n(o.NOTEBOOKS)}},l.a.createElement("i",{className:"icon far fa-copy"}),l.a.createElement("p",{className:"iconLabel"},"Notebooks")),l.a.createElement("div",{className:"menu-bar--bottom-part"},l.a.createElement("div",{className:"tab tab-hoverable",title:"Submit a Bug or a Feature Request"},l.a.createElement("a",{target:"_blank",href:"https://github.com/lambdulus/new-frontend/issues"},l.a.createElement("i",{className:"icon fas fa-bug"})),l.a.createElement("p",{className:"iconLabel"},"GH Issues")),l.a.createElement("div",{className:a===o.HELP?"currentTab tab tab-hoverable":"tab tab-hoverable",title:"Show the Manual",onClick:function(){return n(o.HELP)}},l.a.createElement("i",{className:"icon far fa-question-circle"}),l.a.createElement("p",{className:"iconLabel"},"Manual"))))}n(113);var H="Note in MarkDown";function G(e){return Object(p.a)({},e,{isEditing:!1})}n(114);function q(e,t){return function(e){return-1===e}(t)||t.includes(e)}function J(e){var t=e.addNew,n=e.whiteList,o=e.settings[A];return l.a.createElement("div",{className:"box-top-bar--modal--pick-box-type"},-2===n?l.a.createElement("h4",null,"No Boxes Allowed"):l.a.createElement("div",{className:"modal--create-box"},l.a.createElement("div",{className:"modal--create-box--container"},q(a.UNTYPED_LAMBDA,n)?l.a.createElement("div",{className:"add-box--group"},l.a.createElement("div",{className:"plusBtn",title:"Create new \u03bb box",onClick:function(e){var n;e.stopPropagation(),t((n=o,Object(p.a)({},n,{__key:Date.now().toString(),type:a.UNTYPED_LAMBDA,subtype:r.EMPTY,title:"Untyped \u03bb Expression",minimized:!1,menuOpen:!1,settingsOpen:!1,expression:"",ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:5,macrolistOpen:!1,macrotable:Object(p.a)({},_.macrotable),editor:{placeholder:"placeholder",content:"",caretPosition:0,syntaxError:null}})))}},l.a.createElement("p",{className:"create-box--big"},"\u03bb"),l.a.createElement("p",{className:"creat-box--label"},"+ Untyped \u03bb Expression"))):null,function(e){return e?l.a.createElement("div",{className:"add-box--group"},l.a.createElement("div",{className:"plusBtn",title:"Create new Lisp box",onClick:function(e){e.stopPropagation(),t({__key:Date.now().toString()})}},l.a.createElement("p",{className:"create-box--big"},"()"),l.a.createElement("p",{className:"creat-box--label"},"+ Lisp"))):null}(q(a.LISP,n)),function(e){return e?l.a.createElement("div",{className:"add-box--group"},l.a.createElement("div",{className:"plusBtn",title:"Create new MarkDown box",onClick:function(e){e.stopPropagation(),t({__key:Date.now().toString(),type:a.MARKDOWN,title:"Markdown Box",minimized:!1,menuOpen:!1,settingsOpen:!1,note:"",isEditing:!0,editor:{placeholder:H,content:"",caretPosition:0,syntaxError:null}})}},l.a.createElement("p",{className:"create-box--big"},"M\u2193"),l.a.createElement("p",{className:"creat-box--label"},"+ Markdown"))):null}(q(a.MARKDOWN,n)))))}var Z=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(h.a)(this,Object(E.a)(t).call(this,e))).state={modalOpen:!1},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.addNew,a=(t.whiteList,t.settings,this.state.modalOpen);return!1===this.state.modalOpen?l.a.createElement("div",{className:"create-box-plus",onClick:function(){return e.setState({modalOpen:!a})}},l.a.createElement("div",{className:"create-box-plus--button"},l.a.createElement("i",{className:"fas fa-plus"}))):l.a.createElement(J,{addNew:function(t){n(t),e.setState({modalOpen:!1})},whiteList:this.props.whiteList,settings:this.props.settings})}}]),t}(c.Component);n(54),n(115);function $(e,t,n){try{window.ga.getAll()[0].send("event",e,t,n)}catch(a){}}var Q=function(e){function t(e,n,a,o){var i;return Object(b.a)(this,t),(i=Object(h.a)(this,Object(E.a)(t).call(this))).tree=e,i.onClick=n,i.reduction=a,i.breakpoints=o,i.rendered=null,i.argument=null,i.tree.visit(Object(g.a)(i)),i}return Object(v.a)(t,e),Object(f.a)(t,[{key:"printMultiLambda",value:function(e,t){var n=this;if(e.body instanceof x.Lambda){var a=e.body.argument,o="argument",i="";this.isBreakpoint(e.body.argument)&&(o+=" breakpoint",i="Will break on substitution");var r=!1;this.reduction instanceof x.Alpha&&Array.from(this.reduction.conversions).some((function(t){return t.identifier===e.body.identifier}))&&(this.argument=a,r=!0,o+=" alpha");var s=this.argument;this.argument!==e.body.argument&&null!==this.argument&&this.argument.name()===e.body.argument.name()&&(this.argument=null),this.argument&&this.argument.name()===a.name()&&(o+=" substitutedArg");var c=l.a.createElement("span",{className:"arguments"},t," "," ",l.a.createElement("span",{className:o,title:i,onClick:function(){a.identifier=Symbol(),n.onClick({type:x.ASTReductionType.BETA,context:a,broken:new Set}),$("Breakpoint added to argument","Breakpoint was added","")}},a.name()));this.printMultiLambda(e.body,c),!0===r&&(this.argument=null),this.argument=s}else{e.body.visit(this);var u=this.rendered;this.rendered=t,this.rendered=l.a.createElement("span",{className:"function"},"(",l.a.createElement("span",{className:"lambda"},"\u03bb "," "),t," . ",u,")")}}},{key:"isBreakpoint",value:function(e){var t=!0,n=!1,a=void 0;try{for(var o,i=this.breakpoints[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){if(o.value.context.identifier===e.identifier)return!0}}catch(r){n=!0,a=r}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}return!1}}]),Object(f.a)(t,[{key:"print",value:function(){return this.rendered}},{key:"onApplication",value:function(e){var t="application",n="left",a="right",o=!1,i=null;if(this.reduction instanceof x.Beta&&(i=this.reduction.redex),this.reduction instanceof x.Gama&&this.reduction.args.includes(e)&&(t+=" redex abstraction argument"),null!==i&&i.identifier===e.identifier&&i===e&&(n+=" redex",a+=" redex",e.left instanceof x.Lambda&&(this.argument=e.left.argument,o=!0)),e.right instanceof x.Application){e.left.visit(this);var r=l.a.createElement("span",{className:n},this.rendered);o&&(this.argument=null),e.right.visit(this);var s=l.a.createElement("span",{className:a},"( ",this.rendered," )");this.rendered=l.a.createElement("span",{className:t},r," ",s)}else{e.left.visit(this);var c=l.a.createElement("span",{className:n},this.rendered);o&&(this.argument=null),e.right.visit(this);var u=l.a.createElement("span",{className:a},this.rendered);this.rendered=l.a.createElement("span",{className:t},c," ",u)}}},{key:"onLambda",value:function(e){var t=this,n="",a=this.argument;if(this.argument!==e.argument&&null!==this.argument&&this.argument.name()===e.argument.name()&&(this.argument=null),e.body instanceof x.Lambda){var o=e.argument,i="argument";this.isBreakpoint(e.argument)&&(i+=" breakpoint",n="Will break on substitution"),this.argument&&this.argument.name()===o.name()&&(i+=" substitutedArg");var r=l.a.createElement("span",{className:i,title:n,onClick:function(){o.identifier=Symbol(),t.onClick({type:x.ASTReductionType.BETA,context:o,broken:new Set}),$("Breakpoint added to argument","Breakpoint was added","")}},e.argument.name());this.printMultiLambda(e,r)}else{var s=e.argument;e.body.visit(this);var c=this.rendered,u="argument",m="";this.isBreakpoint(e.argument)&&(u+=" breakpoint",m="Will break on substitution"),this.argument&&this.argument.name()===s.name()&&(u+=" substitutedArg"),this.rendered=l.a.createElement("span",{className:"function"},"(",l.a.createElement("span",{className:"lambda"},"\u03bb "," "),l.a.createElement("span",{className:"arguments",onClick:function(){s.identifier=Symbol()}},l.a.createElement("span",{className:u,title:m,onClick:function(){s.identifier=Symbol(),t.onClick({type:x.ASTReductionType.BETA,context:s,broken:new Set}),$("Breakpoint added","Breakpoint was added","")}},e.argument.name())," "),". ",c,")")}this.argument=a,null!==a&&(this.argument=a)}},{key:"onChurchNumeral",value:function(e){var t=this,n="churchnumeral",a=null,o="";this.reduction instanceof x.Expansion&&(a=this.reduction.target),this.reduction instanceof x.Gama&&this.reduction.args.includes(e)&&(n+=" redex abstraction argument"),null!==a&&a.identifier===e.identifier&&a===e&&(n+=" redex"),this.isBreakpoint(e)&&(n+=" breakpoint",o="Will break on Expansion"),this.rendered=l.a.createElement("span",{className:n,title:o,onClick:function(){e.identifier=Symbol(),t.onClick({type:x.ASTReductionType.EXPANSION,context:e,broken:new Set}),$("Breakpoint added to ChurchNumeral","Breakpoint was added","")}},e.name())}},{key:"onMacro",value:function(e){var t=this,n="macro",a=null,o="";if(this.reduction instanceof x.Expansion&&(a=this.reduction.target),this.reduction instanceof x.Gama){if(this.reduction.redexes.includes(e))a=Object(N.a)(this.reduction.redexes,1)[0],n+=" redex abstraction";this.reduction.args.includes(e)&&(n+=" redex abstraction argument")}null!==a&&a.identifier===e.identifier&&a===e&&(n+=" redex"),this.isBreakpoint(e)&&(n+=" breakpoint",o="Will break on Expansion"),this.rendered=l.a.createElement("span",{className:n,title:o,onClick:function(){e.identifier=Symbol(),t.onClick({type:x.ASTReductionType.EXPANSION,context:e,broken:new Set}),$("Breakpoint added to Macro","Breakpoint was added","")}},e.name())}},{key:"onVariable",value:function(e){var t="variable";this.argument&&this.argument.name()===e.name()&&(t+=" substitutedArg",this.reduction instanceof x.Alpha&&(t+=" alpha")),this.rendered=l.a.createElement("span",{className:t},e.name())}}]),t}(x.ASTVisitor);function ee(e){var t=e.lastReduction;return null===t?null:t.type===x.ASTReductionType.BETA?l.a.createElement("p",{className:"lastReduction"},"\u03b2 reduction"):t.type===x.ASTReductionType.ALPHA?l.a.createElement("p",{className:"lastReduction"},"\u03b1 conversion"):t.type===x.ASTReductionType.EXPANSION?l.a.createElement("p",{className:"lastReduction"},"Macro expansion"):t.type===x.ASTReductionType.GAMA?l.a.createElement("p",{className:"lastReduction"},"Simplified Application"):null}var te=Object(c.memo)((function(e){var t=e.stepRecord,n=e.addBreakpoint,a=e.breakpoints,o=e.children,i=e.strategy,r=t.ast,s=t.lastReduction,c=t.step;t.message;if(null===r)return null;var u=new(T(i))(r).nextReduction,m=new Q(r,n,u,a),d=0===t.message.indexOf("Incorrect step."),p=0===t.message.indexOf("Correct."),b=d||p;return l.a.createElement("span",{className:"step"},l.a.createElement(ee,{lastReduction:s}),l.a.createElement("div",{className:"inlineblock"},l.a.createElement("p",{className:"stepNumber"},c," :"),m.print(),o,""===t.message?null:!1===b?l.a.createElement("p",{className:"stepMessage"},t.message):!0===d?l.a.createElement("p",{className:"stepMessage incorrect"},"Incorrect input: ",l.a.createElement("i",{className:"userInput"},"`",t.message.substr(15),"`")):l.a.createElement("p",{className:"stepMessage correct"},t.message)))}),(function(e){return!e.lastStep}));function ne(e){return l.a.createElement(te,e)}function ae(e){var t=e.className;return l.a.createElement("div",{className:t+" inactiveBox"},l.a.createElement("ul",{className:"UL"},l.a.createElement("li",{key:0,className:"activeStep LI"},l.a.createElement(ne,{breakpoints:e.breakpoints,strategy:e.strategy,addBreakpoint:function(){},stepRecord:e.history[0],lastStep:!1}))),l.a.createElement("p",{className:"inactiveMessage"},"Collapsing ",e.history.length-1," ",2===e.history.length?"step":"steps",". Click to activate this box."))}var oe,ie=n(68),re=n.n(ie);n(151);function se(e){var t=e.placeholder,n=e.content,a=e.syntaxError,o=e.submitOnEnter,i=e.shouldReplaceLambda,r=e.onContent,s=e.onEnter,c=e.onShiftEnter,u=e.onCtrlEnter,m=(n.split("\n").length,function(e){i&&(e=e.replace(/\\/g,"\u03bb")),r(e)});return l.a.createElement("div",{className:"editorContainer"},a?l.a.createElement("p",{className:"editorError"},"".concat(a)):null,l.a.createElement("div",{className:"editor"},l.a.createElement(ce,{placeholder:t,content:n,onContent:function(e){return m(e)},onKeyDown:function(e){e.shiftKey||e.ctrlKey||"Enter"!==e.key?(e.shiftKey&&"Enter"===e.key&&(e.preventDefault(),c()),e.ctrlKey&&"Enter"===e.key&&(e.preventDefault(),u())):o&&(e.stopPropagation(),e.preventDefault(),s())}})))}function ce(e){e.placeholder;var t=e.content,n=e.onKeyDown,a=e.onContent,o=t.split("\n").length;return l.a.createElement("div",{onKeyDownCapture:n},l.a.createElement(re.a,{height:19*(o+1),language:"markdown",theme:"vs-light",value:t,options:{formatOnPaste:!0,minimap:{enabled:!1},renderLineHighlight:"none",scrollBeyondLastLine:!1,overviewRulerBorder:!1,scrollbar:{handleMouseWheel:!1}},onChange:function(e){return a(e)},editorDidMount:function(e,t){return e.focus()}}))}!function(e){e.ENTER_EXPRESSION="Enter Expression",e.ENTER_EXERCISE="Enter Exercise",e.NEXT_STEP="Next Step",e.RUN="Run",e.ENTER_MD="Enter MarkDown"}(oe||(oe={}));n(152);var le=function(e){function t(e){return Object(b.a)(this,t),Object(h.a)(this,Object(E.a)(t).call(this,e))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.onkeydown=function(t){console.log("KEYDOWN",t.key),t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||"F8"!==t.key&&"F9"!==t.key||("F8"===t.key&&(t.preventDefault(),e.props.onStep()),"F9"===t.key&&(t.preventDefault(),e.props.onRun()))}}},{key:"componentWillUnmount",value:function(){document.onkeydown=function(){}}},{key:"render",value:function(){var e=this.props,t=e.isRunning,n=e.onStep,a=e.onRun,o=t?"Stop the Evaluation (Press F9)":"Evaluate the Expression (Press F9)";return l.a.createElement("div",{className:"debug-controls"},l.a.createElement("button",{title:o,type:"button",className:"btn debug-controls--run",onClick:a},l.a.createElement("span",{className:"debug-controls--btn-label"},t?"Stop":"Run"),l.a.createElement("i",{className:"mini-icon fas fa-play"})),l.a.createElement("button",{title:"Evaluate Next Step (Press F8)",type:"button",className:"btn debug-controls--step",onClick:n,disabled:t},l.a.createElement("span",{className:"debug-controls--btn-label"},"Step"),l.a.createElement("i",{className:"mini-icon fas fa-step-forward"})))}}]),t}(c.PureComponent),ue=(n(153),function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(h.a)(this,Object(E.a)(t).call(this,e))).addBreakpoint=n.addBreakpoint.bind(Object(g.a)(n)),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.state,o=t.editor,i=t.shouldShowDebugControls,r=t.isExercise,c=t.setBoxState,u=a.isRunning,m=a.strategy,d=a.SDE,b=o.placeholder,f=o.content,h=(o.caretPosition,o.syntaxError),E=Date.now().toString();return l.a.createElement("div",{className:n},l.a.createElement("ul",{className:"UL"},function(e,t,n,a){for(var o=new Array(t-e+1),i=0,r=e;r<=t;++r)o[i++]=a(n[r],r);return o}(0,this.props.history.length-2,this.props.history,(function(t,n){return l.a.createElement("li",{key:n.toString(),className:"inactiveStep LI"},l.a.createElement(ne,{breakpoints:e.props.breakpoints,strategy:e.props.state.strategy,addBreakpoint:function(){},stepRecord:t,lastStep:!1},l.a.createElement("i",{className:"hiddenIcon far fa-clone",title:"Clone this expression to the new box",onClick:function(n){n.stopPropagation(),e.props.addBox(e.props.createBoxFrom(t))}})))})),l.a.createElement("li",{key:this.props.history.length-1,className:"activeStep LI"},l.a.createElement(ne,{breakpoints:this.props.breakpoints,strategy:this.props.state.strategy,addBreakpoint:this.addBreakpoint,stepRecord:this.props.history[this.props.history.length-1],lastStep:!0},l.a.createElement("i",{className:"hiddenIcon far fa-clone",title:"Clone this expression to the new box",onClick:function(t){t.stopPropagation(),e.props.addBox(e.props.createBoxFrom(e.props.history[e.props.history.length-1]))}})))),r&&!this.props.isNormalForm?l.a.createElement("div",null,l.a.createElement(se,{placeholder:b,content:f,syntaxError:h,submitOnEnter:!0,onContent:this.props.onContent,onEnter:this.props.onEnter,onShiftEnter:function(){},onCtrlEnter:function(){},onExecute:this.props.onExecute,shouldReplaceLambda:!0}),l.a.createElement("div",{className:"untyped-lambda--pick-strategy untyped-lambda-settings-strategies inlineblock"},l.a.createElement("p",{className:"stratsLabel inlineblock"},"Strategy:"),l.a.createElement("span",{className:"untyped-lambda-settings--strategy-radio-wrapper"},l.a.createElement("input",{id:"untyped-lambda-settings--normal-strategy-".concat(E),type:"radio",name:"untyped-lambda-settings--strategy-".concat(E),checked:m===s.NORMAL,onChange:function(){return c(Object(p.a)({},a,{strategy:s.NORMAL}))}}),l.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--normal-strategy-".concat(E)},"Normal")),l.a.createElement("span",{className:"untyped-lambda-settings--strategy-radio-wrapper"},l.a.createElement("input",{id:"untyped-lambda-settings--applicative-strategy-".concat(E),type:"radio",name:"untyped-lambda-settings--strategy-".concat(E),checked:m===s.APPLICATIVE,onChange:function(){return c(Object(p.a)({},a,{strategy:s.APPLICATIVE}))}}),l.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--applicative-strategy-".concat(E)},"Applicative")))):!this.props.isNormalForm&&i?l.a.createElement("div",null,l.a.createElement("span",{className:"untyped-lambda--debug-ctrl"},l.a.createElement(le,{isRunning:u,onStep:this.props.onEnter,onRun:this.props.onExecute})),l.a.createElement("div",{className:"untyped-lambda--pick-strategy untyped-lambda-settings-strategies inlineblock"},l.a.createElement("p",{className:"stratsLabel inlineblock"},"Strategy:"),l.a.createElement("span",{className:"untyped-lambda-settings--strategy-radio-wrapper"},l.a.createElement("input",{id:"untyped-lambda-settings--normal-strategy-".concat(E),type:"radio",name:"untyped-lambda-settings--strategy-".concat(E),checked:m===s.NORMAL,onChange:function(){return c(Object(p.a)({},a,{strategy:s.NORMAL}))}}),l.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--normal-strategy-".concat(E)},"Normal")),l.a.createElement("span",{className:"untyped-lambda-settings--strategy-radio-wrapper"},l.a.createElement("input",{id:"untyped-lambda-settings--applicative-strategy-".concat(E),type:"radio",name:"untyped-lambda-settings--strategy-".concat(E),checked:m===s.APPLICATIVE,onChange:function(){return c(Object(p.a)({},a,{strategy:s.APPLICATIVE}))}}),l.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--applicative-strategy-".concat(E)},"Applicative"))),l.a.createElement("span",{className:"untyped-lambda-settings-SDE-",title:"Simplified Evaluation"},l.a.createElement("input",{id:"untyped-lambda-settings--SDE-".concat(E),type:"checkbox",checked:d,disabled:!1,onChange:function(e){return c(Object(p.a)({},a,{SDE:e.target.checked}))}}),l.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SDE-".concat(E)},"Simplified Evaluation"))):null)}},{key:"addBreakpoint",value:function(e){var t=this.props,n=t.state;(0,t.setBoxState)(Object(p.a)({},n,{breakpoints:[].concat(Object(d.a)(n.breakpoints),[e])}))}}]),t}(c.PureComponent)),me=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(h.a)(this,Object(E.a)(t).call(this,e))).onContent=n.onContent.bind(Object(g.a)(n)),n.onSimplifiedStep=n.onSimplifiedStep.bind(Object(g.a)(n)),n.onStep=n.onStep.bind(Object(g.a)(n)),n.onExecute=n.onExecute.bind(Object(g.a)(n)),n.onRun=n.onRun.bind(Object(g.a)(n)),n.onStop=n.onStop.bind(Object(g.a)(n)),n.shouldBreak=n.shouldBreak.bind(Object(g.a)(n)),n.createBoxFrom=n.createBoxFrom.bind(Object(g.a)(n)),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.state,n=e.isActive,a=e.addBox,o=t.minimized,i=t.history,r=t.breakpoints,s=(t.strategy,t.expression,t.editor),c=(i.length?i[i.length-1]:{isNormalForm:!1}).isNormalForm;return o?l.a.createElement(ae,{className:"box boxEval",breakpoints:r,history:i,strategy:this.props.state.strategy,createBoxFrom:this.createBoxFrom}):l.a.createElement(ue,{className:"box boxEval",isExercise:!1,state:t,breakpoints:r,history:i,editor:s,isNormalForm:c,shouldShowDebugControls:n,createBoxFrom:this.createBoxFrom,setBoxState:this.props.setBoxState,onContent:this.onContent,onEnter:this.onStep,onExecute:this.onExecute,addBox:a})}},{key:"createBoxFrom",value:function(e){var t=this.props.state,n=t.strategy,o=t.SLI,s=t.SDE,c=t.expandStandalones,l=t.macrotable,u=e.ast.toString();return{__key:Date.now().toString(),type:a.UNTYPED_LAMBDA,subtype:r.EMPTY,title:"Copy of ".concat(t.title),minimized:!1,menuOpen:!1,settingsOpen:!1,expression:"",ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:10,strategy:n,SDE:s,SLI:o,expandStandalones:c,macrolistOpen:!1,macrotable:Object(p.a)({},l,{},this.props.macroContext.macrotable),editor:{placeholder:i.EVAL_MODE,content:u,caretPosition:u.length,syntaxError:null}}}},{key:"onContent",value:function(e){var t=this.props,n=t.state;(0,t.setBoxState)(Object(p.a)({},n,{editor:Object(p.a)({},n.editor,{content:e,syntaxError:null})}))}},{key:"onSimplifiedStep",value:function(){console.log("DOIN ONE STEP       _______     SIMPLIFIED");var e=this.props,t=e.state,n=e.setBoxState,a=t.strategy,o=t.history,i=(t.editor.content,t.macrotable),r=o[o.length-1],s=r.isNormalForm,c=r.step,l=(r.lastReduction,r.ast.clone()),u=l;if(!s){var m=w(l,a,i),b=Object(N.a)(m,2),f=b[0],h=b[1];console.log("BACK TO THE WORLD HERE");var E="",g=!1;if(f instanceof I){console.log("YES MACRO BETA HERE");var v=f.arity;f.applications.length!==v?(console.log("ARITY IS WRONG - probably too few arguments"),r.message="Macro ".concat(R(f.applications[0].left,i)," is given too few arguments."),u=h(u)):u=h(u)}else{if(f instanceof x.None)return r.isNormalForm=!0,r.message="Expression is in normal form.",void n(Object(p.a)({},t));u=h(u)}console.log("copak se tohle vubec neprovadi????????????????");var y=w(u.clone(),a,i),k=Object(N.a)(y,2),S=k[0];k[1];S instanceof x.None&&(g=!0,E="Expression is in normal form.",$("Evaluation Step","Step Normal Form Reached",l.toString())),n(Object(p.a)({},t,{history:[].concat(Object(d.a)(o),[{ast:u,lastReduction:f,step:c+1,message:E,isNormalForm:g}])})),$("Evaluation Step","Step Normal Form Reached",l.toString())}}},{key:"onStep",value:function(){var e=this.props,t=e.state,n=e.setBoxState,a=t.strategy,o=t.SDE,i=t.history;t.editor.content;if(o)this.onSimplifiedStep();else{var r=i[i.length-1],s=r.isNormalForm,c=r.step,l=r.ast,u=r.lastReduction;if(l=l.clone(),!s){var m=new(T(a))(l);if(u=m.nextReduction,m.nextReduction instanceof x.None)return r.isNormalForm=!0,r.message="Expression is in normal form.",n(Object(p.a)({},t)),void $("Evaluation Step","Step Normal Form Reached",l.toString());var b="",f=!1,h=(l=m.perform()).clone();new(T(a))(h).nextReduction instanceof x.None&&(f=!0,b="Expression is in normal form.",$("Evaluation Step","Step Normal Form Reached",l.toString())),n(Object(p.a)({},t,{history:[].concat(Object(d.a)(i),[{ast:l,lastReduction:u,step:c+1,message:b,isNormalForm:f}])})),$("Evaluation Step","Step",l.toString())}}}},{key:"onExecute",value:function(){var e=this.props,t=e.state,n=e.setBoxState;if(t.isRunning)this.onStop();else{var a=t.timeout,o=t.history,i=o[o.length-1];if(i.isNormalForm)return;var r=i.ast,s=i.step,c=i.lastReduction,l=i.isNormalForm;i.message;o.push(o[o.length-1]),o[o.length-2]={ast:r.clone(),step:s,lastReduction:c,message:"Skipping some steps...",isNormalForm:l},n(Object(p.a)({},t,{isRunning:!0,timeoutID:window.setTimeout(this.onRun,a)})),$("Execution","Run Evaluation",r.toString())}}},{key:"onRun",value:function(){var e=this,t=this.props,n=t.state,a=t.setBoxState,o=n.strategy,i=n.history,r=n.isRunning,s=n.breakpoints,c=n.timeoutID,l=n.timeout,u=i[i.length-1],m=u.isNormalForm,d=u.step,b=u.lastReduction;if(r)if(m)a(Object(p.a)({},n,{isRunning:!1,timeoutID:void 0}));else{var f=u.ast,h=new(T(o))(f);if(b=h.nextReduction,h.nextReduction instanceof x.None)return i.pop(),i.push({ast:f,lastReduction:u.lastReduction,step:d,message:"Expression is in normal form.",isNormalForm:!0}),void a(Object(p.a)({},n,{isRunning:!1,timeoutID:void 0}));var E=s.find((function(t){return e.shouldBreak(t,h.nextReduction)}));if(void 0!==E)return h.nextReduction instanceof x.Expansion&&E.broken.add(h.nextReduction.target),h.nextReduction instanceof x.Beta&&h.nextReduction.redex.left instanceof x.Lambda&&E.broken.add(h.nextReduction.redex.left.argument),window.clearTimeout(c),$("Evaluation Run Ended","Breakpoint was reached",f.toString()),void a(Object(p.a)({},n,{isRunning:!1,timeoutID:c}));f=h.perform(),i[i.length-1]={ast:f,lastReduction:b,step:d+1,message:"",isNormalForm:m},a(Object(p.a)({},n,{timeoutID:window.setTimeout(this.onRun,l)}))}}},{key:"onStop",value:function(){var e=this.props,t=e.state,n=e.setBoxState,a=t.timeoutID;window.clearTimeout(a),n(Object(p.a)({},t,{isRunning:!1,timeoutID:void 0}))}},{key:"shouldBreak",value:function(e,t){return t.type===e.type&&t instanceof x.Beta&&e.context instanceof x.Variable&&t.redex.left instanceof x.Lambda&&t.redex.left.argument.identifier===e.context.identifier&&!e.broken.has(t.redex.left.argument)||(t.type===e.type&&t instanceof x.Expansion&&e.context instanceof x.ChurchNumeral&&t.target.identifier===e.context.identifier&&!e.broken.has(t.target)||t.type===e.type&&t instanceof x.Expansion&&e.context instanceof x.Macro&&t.target.identifier===e.context.identifier&&!e.broken.has(t.target))}}]),t}(c.PureComponent);n(154);function de(e){var t=e.macroTable;return l.a.createElement("div",{className:"macroSpace"},l.a.createElement("div",{className:"builtinMacros"},l.a.createElement("p",null,"Built-in Macros:"),l.a.createElement("ul",{className:"UL"},Object.entries(x.builtinMacros).map((function(e){var t=Object(N.a)(e,2),n=t[0],a=t[1];return l.a.createElement("div",{key:n},l.a.createElement("li",{className:"LI dense-LI"},l.a.createElement("div",{className:"macro-definition"},n," := ",a)))})))),l.a.createElement("div",{className:"userMacros"},l.a.createElement("p",null,"User-defined Macros:"),l.a.createElement("ul",{className:"UL"},Object.entries(t).map((function(e){var t=Object(N.a)(e,2),n=t[0],a=t[1];return l.a.createElement("div",{key:n},l.a.createElement("li",{className:"LI dense-LI"},l.a.createElement("div",{className:"macro-definition"},n," := ",a)))})))))}var pe=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(h.a)(this,Object(E.a)(t).call(this,e))).onContent=n.onContent.bind(Object(g.a)(n)),n.onSubmitExpression=n.onSubmitExpression.bind(Object(g.a)(n)),n.parseExpression=n.parseExpression.bind(Object(g.a)(n)),n.onEnter=n.onEnter.bind(Object(g.a)(n)),n.onExerciseStep=n.onExerciseStep.bind(Object(g.a)(n)),n.onStep=n.onStep.bind(Object(g.a)(n)),n.onExecute=n.onExecute.bind(Object(g.a)(n)),n.onRun=n.onRun.bind(Object(g.a)(n)),n.onStop=n.onStop.bind(Object(g.a)(n)),n.shouldBreak=n.shouldBreak.bind(Object(g.a)(n)),n.createBoxFrom=n.createBoxFrom.bind(Object(g.a)(n)),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.state,n=e.isActive,a=e.addBox,o=t.minimized,i=t.history,r=t.breakpoints,s=(t.strategy,t.expression,t.editor),c=(i.length?i[i.length-1]:{isNormalForm:!1}).isNormalForm;return o?l.a.createElement(ae,{className:"box boxEval boxExercise",breakpoints:r,history:i,strategy:this.props.state.strategy,createBoxFrom:this.createBoxFrom}):l.a.createElement(ue,{className:"box boxEval boxExercise",isExercise:!0,state:t,breakpoints:r,history:i,editor:s,isNormalForm:c,shouldShowDebugControls:n,createBoxFrom:this.createBoxFrom,setBoxState:this.props.setBoxState,onContent:this.onContent,onEnter:this.onEnter,onExecute:this.onExecute,addBox:a})}},{key:"createBoxFrom",value:function(e){var t=this.props.state,n=t.strategy,o=t.SLI,s=t.SDE,c=t.expandStandalones,l=t.macrotable,u=e.ast.toString();return{__key:Date.now().toString(),type:a.UNTYPED_LAMBDA,subtype:r.EMPTY,title:"Copy of ".concat(t.title),minimized:!1,menuOpen:!1,settingsOpen:!1,expression:"",ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:10,strategy:n,SDE:s,SLI:o,expandStandalones:c,macrolistOpen:!1,macrotable:Object(p.a)({},l,{},this.props.macroContext.macrotable),editor:{placeholder:i.EVAL_MODE,content:u,caretPosition:u.length,syntaxError:null}}}},{key:"onContent",value:function(e){var t=this.props,n=t.state;(0,t.setBoxState)(Object(p.a)({},n,{editor:Object(p.a)({},n.editor,{content:e,syntaxError:null})}))}},{key:"onEnter",value:function(){var e=this.props.state;e.expression;""===e.editor.content&&this.onStep(),this.onExerciseStep()}},{key:"onSubmitExpression",value:function(){var e=this.props,t=e.state,n=e.setBoxState,a=t.strategy,o=t.editor.content;try{var r=this.parseExpression(o),s="",c=!1,l=r.clone();new(T(a))(l).nextReduction instanceof x.None&&(c=!0,s="Expression is in normal form."),n(Object(p.a)({},t,{ast:r,expression:o,history:[{ast:r.clone(),lastReduction:new x.None,step:0,message:s,isNormalForm:c}],editor:{content:"",caretPosition:0,placeholder:i.EVAL_MODE,syntaxError:null}})),$("Submit Expression","submit valid",o)}catch(u){n(Object(p.a)({},t,{editor:Object(p.a)({},t.editor,{syntaxError:u.toString()})})),$("Submit Expression","submit invalid",o)}}},{key:"onExerciseStep",value:function(){console.log("EXERCISE STEP");var e=this.props,t=e.state,n=e.setBoxState,a=t.strategy,o=t.history,r=t.editor.content;try{var s=this.parseExpression(r),c=o[o.length-1],l=c.isNormalForm,u=c.step,m=c.ast,b=c.lastReduction;if(m=m.clone(),l)return c.message="No more steps available. Expression is in normal form.",n(Object(p.a)({},t)),void $("Exercise Step","Step Already in normal form",r);var f=new(T(a))(m);if(b=f.nextReduction,f.nextReduction instanceof x.None)return c.isNormalForm=!0,c.message="Expression is already in normal form.",n(Object(p.a)({},t)),void $("Exercise Step","Step Already in Normal Form",r);m=f.perform();var h=!1,E=m.clone();new(T(a))(E).nextReduction instanceof x.None&&(h=!0,$("Evaluation Step","Step Normal Form Reached",m.toString()));var g="";new O([s,m]).equals?(m=s,g="Correct.",$("Exercise Step","Valid Step",r)):(g="Incorrect step. ".concat(r),$("Exercise Step","Invalid Step",r)),n(Object(p.a)({},t,{history:[].concat(Object(d.a)(o),[{ast:m,lastReduction:b,step:u+1,message:g,isNormalForm:h}]),editor:Object(p.a)({},t.editor,{content:"",caretPosition:0,placeholder:i.VALIDATE_MODE,syntaxError:null})}))}catch(v){$("Exercise Step","Syntax error in Step",r)}}},{key:"onStep",value:function(){console.log("DOIN ONE STEP");var e=this.props,t=e.state,n=e.setBoxState,a=t.strategy,o=t.history,i=(t.editor.content,o[o.length-1]),r=i.isNormalForm,s=i.step,c=i.ast,l=i.lastReduction;if(c=c.clone(),!r){var u=new(T(a))(c);if(l=u.nextReduction,u.nextReduction instanceof x.None)return console.log("NEXT IS NONE"),i.isNormalForm=!0,i.message="Expression is in normal form.",n(Object(p.a)({},t)),void $("Evaluation Step","Step Normal Form Reached",c.toString());var m="Evaluating One Step for You",b=!1,f=(c=u.perform()).clone();new(T(a))(f).nextReduction instanceof x.None&&(b=!0,m="Expression is in normal form.",$("Evaluation Step","Step Normal Form Reached",c.toString())),n(Object(p.a)({},t,{history:[].concat(Object(d.a)(o),[{ast:c,lastReduction:l,step:s+1,message:m,isNormalForm:b}])})),$("Exercise Empty Evaluation Step","Step",c.toString())}}},{key:"onExecute",value:function(){}},{key:"onRun",value:function(){}},{key:"onStop",value:function(){}},{key:"shouldBreak",value:function(e,t){return!1}},{key:"parseExpression",value:function(e){var t=this.props.state.SLI,n=Object(x.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:t});return Object(x.parse)(n,this.props.macroContext.macrotable)}}]),t}(c.PureComponent);n(155);function be(e){var t=e.settings,n=e.change,a=e.settingsEnabled,o=t.SLI,i=(t.expandStandalones,t.strategy),r=t.SDE,c=a.SLI,u=(a.expandStandalones,a.strategy),m=Date.now().toString();return l.a.createElement("div",{className:"untyped-lambda-box--settings"},c?l.a.createElement("span",{className:"untyped-lambda-settings-SLI",title:"Single Letters as Names without Spaces"},l.a.createElement("input",{id:"untyped-lambda-settings--SLI-".concat(m),type:"checkbox",checked:o,disabled:!1,onChange:function(e){return n(Object(p.a)({},t,{SLI:e.target.checked}))}}),l.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SLI-".concat(m)},"Single Letter Names")):null,l.a.createElement("span",{className:"untyped-lambda-settings-SDE",title:"Simplified Evaluation"},l.a.createElement("input",{id:"untyped-lambda-settings--SDE-".concat(m),type:"checkbox",checked:r,disabled:!1,onChange:function(e){return n(Object(p.a)({},t,{SDE:e.target.checked}))}}),l.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SDE-".concat(m)},"Simplified Evaluation")),null,u?l.a.createElement("div",{className:"untyped-lambda-settings-strategies inlineblock"},l.a.createElement("p",{className:"stratsLabel inlineblock"},"Evaluation Strategies:"),l.a.createElement("span",{className:"untyped-lambda-settings--strategy-radio-wrapper"},l.a.createElement("input",{id:"untyped-lambda-settings--normal-strategy-".concat(m),type:"radio",name:"untyped-lambda-settings--strategy-".concat(m),checked:i===s.NORMAL,onChange:function(){return n(Object(p.a)({},t,{strategy:s.NORMAL}))}}),l.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--normal-strategy-".concat(m)},"Normal")),l.a.createElement("span",{className:"untyped-lambda-settings--strategy-radio-wrapper"},l.a.createElement("input",{id:"untyped-lambda-settings--applicative-strategy-".concat(m),type:"radio",name:"untyped-lambda-settings--strategy-".concat(m),checked:i===s.APPLICATIVE,onChange:function(){return n(Object(p.a)({},t,{strategy:s.APPLICATIVE}))}}),l.a.createElement("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--applicative-strategy-".concat(m)},"Applicative"))):null)}n(156);function fe(e){var t=e.className,n=e.isActive,a=e.editor,o=a.placeholder,i=a.content,r=(a.caretPosition,a.syntaxError);return l.a.createElement("div",{className:"".concat(t," ").concat(n?"":" inactiveBox")},n?l.a.createElement("div",null,l.a.createElement(se,{placeholder:o,content:i,syntaxError:r,submitOnEnter:!1,shouldReplaceLambda:!0,onContent:e.onContent,onEnter:function(){},onCtrlEnter:e.onDebug,onShiftEnter:e.onExercise,onExecute:function(){}}),l.a.createElement("div",{className:"debug-controls"},l.a.createElement("button",{title:"Debug this Expression in the Evaluator (Ctrl + Enter)",type:"button",className:"open-as-debug btn",onClick:e.onDebug},l.a.createElement("span",{className:"untyped-lambda--submit-expression--btn-label"},"Debug")),l.a.createElement("button",{title:"Exercise this Expression Yourself (Shift + Enter)",type:"button",className:"open-as-exercise btn",onClick:e.onExercise},l.a.createElement("span",{className:"untyped-lambda--submit-expression--btn-label"},"Exercise")))):l.a.createElement("div",null,l.a.createElement("p",{className:"inactiveMessage"},"Collapsing Empty Expression Box. Click to activate this box.")))}var he=function(e){function t(e){return Object(b.a)(this,t),Object(h.a)(this,Object(E.a)(t).call(this,e))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.state,o=t.isActive,i=t.isFocused,s=t.setBoxState,c=t.addBox,u=n.settingsOpen,m=n.subtype,d=n.macrolistOpen,b=n.SLI,f=n.expandStandalones,h=n.strategy,E=n.SDE,g=n.editor;return l.a.createElement("div",null,u?l.a.createElement("div",{className:"box-settings"},"Box Local Settings:",l.a.createElement(be,{settings:{type:a.UNTYPED_LAMBDA,SLI:b,expandStandalones:f,strategy:h,SDE:E},settingsEnabled:L,change:function(e){s(Object(p.a)({},n,{},e))}})):null,d?l.a.createElement("div",{className:"untyped-lambda-box--macrolist"},l.a.createElement(de,{macroTable:n.macrotable})):null,function(){switch(m){case r.EMPTY:return l.a.createElement(fe,{className:"box boxEval",isActive:o,editor:g,onContent:function(e){return s(Object(p.a)({},n,{editor:Object(p.a)({},n.editor,{content:e,syntaxError:null})}))},onDebug:function(){return e.onSubmitExpression(r.ORDINARY)},onExercise:function(){return e.onSubmitExpression(r.EXERCISE)}});case r.ORDINARY:return l.a.createElement(me,{state:n,isActive:o,isFocused:i,macroContext:_,setBoxState:s,addBox:c});case r.EXERCISE:return l.a.createElement(pe,{state:n,isActive:o,isFocused:i,macroContext:_,setBoxState:s,addBox:c})}}())}},{key:"onSubmitExpression",value:function(e){var t=this.props,n=t.state,a=t.setBoxState,o=n.editor.content,r=n.strategy,s=o.split(";"),c=s.pop()||"",l=function(e){return e.reduce((function(e,t){var n=t.split(":="),a=Object(N.a)(n,2),o=a[0],i=a[1];return Object(p.a)({},e,Object(y.a)({},o.trim(),i.trim()))}),{})}(s);try{var u=this.parseExpression(c,l),m="",d=!1,b=u.clone();new(T(r))(b).nextReduction instanceof x.None&&(d=!0,m="Expression is in normal form."),a(Object(p.a)({},n,{ast:u,subtype:e,expression:o,macrotable:l,history:[{ast:u.clone(),lastReduction:new x.None,step:0,message:m,isNormalForm:d}],editor:{content:"",caretPosition:0,placeholder:i.EVAL_MODE,syntaxError:null}})),$("Submit Expression","submit valid",o)}catch(f){a(Object(p.a)({},n,{editor:Object(p.a)({},n.editor,{syntaxError:f.toString()})})),$("Submit Expression","submit invalid",o)}}},{key:"parseExpression",value:function(e,t){var n=this.props.state.SLI,a=Object(x.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:n});return Object(x.parse)(a,t)}}]),t}(c.PureComponent);n(56),n(157);var Ee=n(57);function ge(e){var t=e.state,n=t.note,a=t.editor,o=a.placeholder,i=a.content,r=(a.caretPosition,a.syntaxError),s=t.isEditing,c=e.isActive,u=(e.isFocused,e.setBoxState);return s?l.a.createElement("div",{className:"box boxNoteEditor"},l.a.createElement(se,{placeholder:o,content:i,syntaxError:r,submitOnEnter:!1,shouldReplaceLambda:!1,onContent:function(t){u(Object(p.a)({},e.state,{note:t,editor:Object(p.a)({},e.state.editor,{content:t,syntaxError:null})}))},onEnter:function(){},onCtrlEnter:function(){},onShiftEnter:function(){},onExecute:function(){}})):l.a.createElement("div",{className:"box boxNote",onClick:function(){return c&&u(Object(p.a)({},e.state,{isEditing:!0}))}},l.a.createElement(Ee,{className:"markdown-body",source:n}))}function ve(e){return l.a.createElement("div",null,"Empty Box")}function Ne(e){var t=e.state,n=e.isActive,o=e.isFocused,i=e.updateBoxState,r=e.addBoxAfter,s=t.type;return s===a.UNTYPED_LAMBDA?l.a.createElement(he,{state:t,isActive:n,isFocused:o,setBoxState:i,addBox:r}):s===a.MARKDOWN?l.a.createElement(ge,{state:t,isActive:n,isFocused:o,setBoxState:i}):l.a.createElement(ve,null)}n(239);function ye(e){var t=e.state;e.isActive,e.removeBox,e.updateBoxState,t.macrolistOpen;return l.a.createElement("div",{className:""})}n(240),n(241),n(242).Switch;function xe(e){var t=e.state,n=(e.isActive,e.removeBox,e.updateBoxState),a=(t.note,t.isEditing);t.title;return l.a.createElement("div",{className:""},l.a.createElement("div",{className:"markdown-controls",title:"Edit as Markdown"},l.a.createElement("div",{className:"markdown-editing"},l.a.createElement("span",{className:"markdown-write ".concat(a?"markdown-selected":""),onClick:function(e){e.stopPropagation(),!1===a&&n(Object(p.a)({},t,{isEditing:!0}))}},"Edit"),l.a.createElement("span",{className:"markdown-preview ".concat(a?"":"markdown-selected"),onClick:function(e){e.stopPropagation(),!0===a&&n(Object(p.a)({},t,{isEditing:!1}))}},"Preview"))))}function ke(e){return l.a.createElement("div",null)}n(243);var Se=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(h.a)(this,Object(E.a)(t).call(this,e))).state={modalOpen:!1,where:null,menuOpen:!1},n.selectBoxType=n.selectBoxType.bind(Object(g.a)(n)),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.state,o=t.isActive,i=t.updateBoxState,s=t.removeBox,c=(t.addBoxBefore,t.addBoxAfter,n.type),u=n.title,m=n.minimized,d=(n.settingsOpen,this.state),b=d.modalOpen,f=d.where,h=d.menuOpen;return l.a.createElement("div",{className:"boxTopBar"},b?l.a.createElement(J,{addNew:function(t){"before"===f?e.props.addBoxBefore(t):e.props.addBoxAfter(t),e.setState({modalOpen:!1,where:null,menuOpen:!1})},whiteList:this.props.whiteList,settings:this.props.settings}):null,l.a.createElement("div",{className:"topBarTitle"},l.a.createElement("span",{className:"box-top-bar--title-text",contentEditable:!0,onBlur:function(e){return i(Object(p.a)({},n,{title:e.target.textContent||""}))}},u)),l.a.createElement("div",{className:"box-top-bar-custom"},c===a.UNTYPED_LAMBDA?l.a.createElement(ye,{state:n,isActive:o,removeBox:s,updateBoxState:i}):c===a.MARKDOWN?l.a.createElement(xe,{state:n,isActive:o,removeBox:s,updateBoxState:i}):l.a.createElement(ke,null)),l.a.createElement("div",{className:"box-top-bar-controls"},c!==a.MARKDOWN?l.a.createElement("div",{onClick:function(e){e.stopPropagation(),i(Object(p.a)({},n,{minimized:!m}))},className:"box-top-bar--controls--imize",title:m?"Expand this Box":"Collapse this Box"},m?l.a.createElement("i",{className:"mini-icon fas fa-caret-down"}):l.a.createElement("i",{className:"mini-icon fas fa-caret-up"})):null,l.a.createElement("div",{onClick:function(t){t.stopPropagation(),e.setState({menuOpen:!h})},className:"box-top-bar--controls--menu ".concat(h?"menu-pressed-open":"")},l.a.createElement("i",{className:"mini-icon fas fa-ellipsis-v"}))),h?l.a.createElement("div",{className:"box-top-bar--menu"},l.a.createElement("div",{className:"box-top-bar--menu-item",onClick:s,title:"Delete this Box from the Notebook"},"Remove"),l.a.createElement("div",{className:"box-top-bar--menu-item",title:"Add another Box before this one",onClick:function(t){t.stopPropagation(),e.selectBoxType("before")}},"New Box Before"),l.a.createElement("div",{className:"box-top-bar--menu-item",title:"Add another Box after this one",onClick:function(t){t.stopPropagation(),e.selectBoxType("after")}},"New Box After"),l.a.createElement("div",{className:"box-top-bar--menu-item",title:"Reset this Box to Initial State",onClick:function(t){switch(t.stopPropagation(),console.log("CLICKED ON RESET BOX"),c){case a.UNTYPED_LAMBDA:console.log("RESET UNTYPED LAMBDA"),i(function(e){return Object(p.a)({},e,{subtype:r.EMPTY,title:"Untyped \u03bb Expression",minimized:!1,expression:"",ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:5,macrolistOpen:!1,macrotable:Object(p.a)({},_.macrotable),editor:{placeholder:"placeholder",content:"",caretPosition:0,syntaxError:null}})}(n));break;case a.MARKDOWN:console.log("RESET MARODOWN"),i(function(e){return Object(p.a)({},e,{minimized:!1,note:"",isEditing:!0,editor:{placeholder:H,content:"",caretPosition:0,syntaxError:null}})}(n))}e.setState({menuOpen:!1})}},"Reset this Box")):null)}},{key:"selectBoxType",value:function(e){this.setState({modalOpen:!0,where:e})}}]),t}(c.Component);n(244);function Oe(e){var t=e.isActiveBox,n=e.isFocusedBox,o=e.box,i=e.makeActive,r=e.onBlur,s=e.updateBoxState,c=e.addBoxBefore,u=e.addBoxAfter,m=e.removeBox,d=(o.settingsOpen,function(e){switch(e){case a.UNTYPED_LAMBDA:return"untypedLambdaBox";case a.MARKDOWN:return"markDownBox";default:return""}}(o.type));return l.a.createElement("div",{className:"boxContainer ".concat(t?"active":"inactive"," ").concat(d),onClick:i,onBlur:r},l.a.createElement(Se,{state:o,isActive:t,isFocused:n,removeBox:function(e){e.stopPropagation(),m()},updateBoxState:s,addBoxBefore:c,addBoxAfter:u,settings:e.settings,whiteList:e.whiteList}),l.a.createElement(Ne,{state:o,isActive:t,isFocused:n,updateBoxState:s,addBoxAfter:u}))}var _e=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(h.a)(this,Object(E.a)(t).call(this,e))).insertBefore=n.insertBefore.bind(Object(g.a)(n)),n.insertAfter=n.insertAfter.bind(Object(g.a)(n)),n.removeBox=n.removeBox.bind(Object(g.a)(n)),n.updateBoxState=n.updateBoxState.bind(Object(g.a)(n)),n.makeActive=n.makeActive.bind(Object(g.a)(n)),n.onBlur=n.onBlur.bind(Object(g.a)(n)),n.createBoxFromURL=n.createBoxFromURL.bind(Object(g.a)(n)),n.setBoxState=n.setBoxState.bind(Object(g.a)(n)),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.createBoxFromURL()}},{key:"render",value:function(){var e=this,t=this.props,n=t.state,a=t.settings,o=n.activeBoxIndex,i=n.focusedBoxIndex,r=n.boxList,s=n.allowedBoxes;return l.a.createElement("div",{className:"mainSpace"},l.a.createElement("ul",{className:"boxList UL"},r.map((function(t,n){return l.a.createElement("li",{className:"LI",key:t.__key},l.a.createElement(Oe,{box:t,isActiveBox:o===n,isFocusedBox:i===n,addBoxBefore:function(t){return e.insertBefore(n,t)},addBoxAfter:function(t){return e.insertAfter(n,t)},makeActive:function(){return e.makeActive(n)},removeBox:function(){return e.removeBox(n)},updateBoxState:function(t){return e.updateBoxState(n,t)},onBlur:function(){return e.onBlur(n)},whiteList:s,settings:a}))})),0===r.length?l.a.createElement(Z,{addNew:function(t){return e.insertBefore(n.boxList.length,t)},whiteList:s,settings:a}):null))}},{key:"createBoxFromURL",value:function(){var e=new URL(window.location.toString()).searchParams;null!==e.get("type")&&(console.log(window.location.toString()),console.log(e.get("type")),console.log(e.get("source")))}},{key:"setBoxState",value:function(e,t){}},{key:"insertBefore",value:function(e,t){var n=this.props.state.boxList,a=Object(d.a)(n);a.splice(e,0,t),this.props.updateNotebook({boxList:a,activeBoxIndex:e,focusedBoxIndex:e})}},{key:"insertAfter",value:function(e,t){var n=this.props.state.boxList;n.splice(e+1,0,t),this.props.updateNotebook({boxList:n,activeBoxIndex:e+1,focusedBoxIndex:e+1})}},{key:"removeBox",value:function(e){var t,n=this.props.state,a=n.boxList,o=n.activeBoxIndex,i=(t=e)<o?o-1:t>o?o:1===a.length?NaN:0===t?t:t-1;a.splice(e,1),this.props.updateNotebook({boxList:a,activeBoxIndex:i})}},{key:"updateBoxState",value:function(e,t){console.log("UPDATING BOX STATE");var n=this.props.state.boxList;n[e]=Object(p.a)({},t),this.props.updateNotebook({boxList:Object(d.a)(n),activeBoxIndex:e})}},{key:"makeActive",value:function(e){console.log("CLICKED ON               MAKE ACTIVE "+e);var t,n=this.props.state,o=n.activeBoxIndex,i=n.focusedBoxIndex,r=n.boxList;switch(r[o].type){case a.UNTYPED_LAMBDA:break;case a.MARKDOWN:r[o]=G(r[o])}if(e!==o||e!==i||!0===r[e].minimized){var s={minimized:!1};switch(r[e].type){case a.MARKDOWN:r[e]=Object(p.a)({},(t=r[e],Object(p.a)({},t,{isEditing:!0})),{},s);default:r[e]=Object(p.a)({},r[e],{},s)}this.props.updateNotebook({activeBoxIndex:e,focusedBoxIndex:e,boxList:r})}}},{key:"onBlur",value:function(e){console.log(".................................."),console.log("                  BLUR "+e);var t=this.props.state,n=t.boxList;if(t.activeBoxIndex===e){switch(n[e].type){case a.UNTYPED_LAMBDA:break;case a.MARKDOWN:n[e]=G(n[e])}this.props.updateNotebook({boxList:n,focusedBoxIndex:void 0})}}}]),t}(c.PureComponent),Ae=n(57);function Be(e){return l.a.createElement("div",{className:"helpSpace"},l.a.createElement(Ae,{className:"markdown-body",source:"# User guide\n\n## Typing expressions\n#### To write lambda expression you simply type in the prompt.\n\n## Typing \u03bb symbol\n#### If you want to write `\u03bb` symbol inside of the Interactive Box - you simply type `\\` and Lambdulus will take care of the rest.\n\n#### If you need to write `\u03bb` symbol inside of the Markdown Box - you can use `&lambda;` sequence.\n\n## Multiple expressions\n#### You can also have many submitted expressions. To submit another expression you need to open new empty `expression box` by clicking on the `\u03bb` inside the `+\u03bb +Macro +MD` panel at the end of the notebook.\n\n## Single Letter Names (SLI)\n#### You can write lambda functions and omit whitespaces such as `(\u03bbabc.cba) 2 1 +`. To do that you have to check switch `Single Letter Names` at the top of the page.\n\n## Evaluation Strategies\n#### We have option to select from 3 evaluation strategies. The `Simplified` strategy is specific evaluation order which evaluates built-in macros atomicaly. The `Normal` and the `Applicative` strategies are sort of self describing.\n\n## Macros\n#### If you want to define your own macro - you can. You must first create empty `macro box` by clicking on the `+Macro` inside the `+\u03bb +Macro +MD` panel at the end of the notebook. Then you write macro name followed by symbol `:=` and then valid lambda expression.\n\n## Macro Definition\n#### Inside the macro definition you can reference any valid macro which is already defined or will be defined in the future. Yes you can reference macro you are just defining inside it's own definition - whether you should or not is up to you.\n\n## List All Macros\n#### If you want to list all defined macros - built-ins and also your macros - you simply click on the `Macro` icon at the top or on the left of the page.\n\n## Remove User Macro\n#### To remove user macros - `because you can not remove built-ins` - first show all macros and then hover your mouse over the macro you want to remove and click the `trash bin` icon.\n\n## Redefine User Macro\n#### To redefine user macro - `because you can not redefine built-ins` - just create new empty `macro box` and define the already existing macro again - this time with different macro definition.\n\n## Report a Bug or Request New Features\n#### If you want to report a bug or you need some feature - click on the `Issues` button on the left or at the top of the page. Then fill in the issue on the GitHub page of the project. Definitely don't forget to check if the corresponding issue already exist.\n"}))}function je(e){var t=e.settings,n=e.updateSettings,a=t[A];return l.a.createElement("div",{className:"settingsSpace"},l.a.createElement("h2",null,"Settings for Untyped Lambda Calculus:"),l.a.createElement(be,{settings:a,settingsEnabled:L,change:function(e){return n(Object(p.a)({},t,Object(y.a)({},A,e)))}}))}n(245);function Le(e){var t=e.state,n=e.onSelectNotebook,a=e.onRemoveNotebook,o=e.onUpdateNotebook,i=e.onAddNotebook,r=t.notebookList;t.currentNotebook;return l.a.createElement("div",{className:"mainSpace"},l.a.createElement("ul",{className:"notebook-list UL"},l.a.createElement("li",{className:"LI cursor-pointer notebook-list--add-notebook cursor-pointer notebook-list--notebook",onClick:function(e){e.stopPropagation();var t=prompt("Please Write the Name of New Notebook");null===t||i(t)}},l.a.createElement("div",{className:"notebook-list--add-notebook--container"},l.a.createElement("i",{className:"mini-icon fas fa-plus"}))),r.map((function(e,t){return l.a.createElement("li",{className:"LI cursor-pointer notebook-list--notebook",key:e.__key,onClick:function(){return n(t)}},l.a.createElement("div",{className:"notebook-list--notebook-thumbnal"},l.a.createElement(_e,{state:e,settings:e.settings,updateNotebook:function(){}})),l.a.createElement("div",{className:"notebook-list--notebook-footer"},l.a.createElement("span",{className:"notebook-list--notebook-footer--title"},e.name),l.a.createElement("div",{className:"notebook-list--notebook-footer--menu"},l.a.createElement("div",{onClick:function(n){n.stopPropagation(),o(Object(p.a)({},e,{menuOpen:!e.menuOpen}),t)},className:"notebook-list--notebook--menu--dots ".concat(e.menuOpen?"menu-pressed-open":"")},l.a.createElement("i",{className:"mini-icon fas fa-ellipsis-v"})))),e.menuOpen?l.a.createElement("div",{className:"notebook-list--notebook--menu"},l.a.createElement("div",{className:"box-top-bar--menu-item",onClick:function(e){e.stopPropagation(),a(t)}},"Remove"),l.a.createElement("div",{className:"box-top-bar--menu-item",onClick:function(n){n.stopPropagation();var a=prompt("Please Enter New Name for the Notebook");null!==a&&o(Object(p.a)({},e,{name:a,menuOpen:!1}),t)}},"Rename")):null)}))))}var we=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(h.a)(this,Object(E.a)(t).call(this,e))).state=Y(),function(e){for(var t=e.currentNotebook,n=e.notebookList[t],o=0,i=Object.entries(n.integrationStates);o<i.length;o++){var r=Object(N.a)(i[o],2),s=r[0],c=r[1];switch(s){case a.UNTYPED_LAMBDA:return void(c.macrotable=_.macrotable)}}}(n.state),n.setScreen=n.setScreen.bind(Object(g.a)(n)),n.updateNotebook=n.updateNotebook.bind(Object(g.a)(n)),n.changeNotebook=n.changeNotebook.bind(Object(g.a)(n)),n.addNotebook=n.addNotebook.bind(Object(g.a)(n)),n.removeNotebook=n.removeNotebook.bind(Object(g.a)(n)),n.editNotebookName=n.editNotebookName.bind(Object(g.a)(n)),n.changeNotebookName=n.changeNotebookName.bind(Object(g.a)(n)),n.stopEditingNotebook=n.stopEditingNotebook.bind(Object(g.a)(n)),n.updateSettings=n.updateSettings.bind(Object(g.a)(n)),n.importNotebook=n.importNotebook.bind(Object(g.a)(n)),n.clearWorkspace=n.clearWorkspace.bind(Object(g.a)(n)),n.selectNotebook=n.selectNotebook.bind(Object(g.a)(n)),n.updateNthNotebook=n.updateNthNotebook.bind(Object(g.a)(n)),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.notebookList,a=t.currentNotebook,i=t.currentScreen,r=n[a],s=r.settings;return l.a.createElement("div",{id:"app"},l.a.createElement(z,{state:this.state,onScreenChange:this.setScreen,onImport:this.importNotebook,onClearWorkspace:this.clearWorkspace}),l.a.createElement(X,{state:this.state,onScreenChange:this.setScreen}),i===o.MAIN?l.a.createElement(_e,{state:r,updateNotebook:e.updateNotebook,settings:s}):i===o.NOTEBOOKS?l.a.createElement(Le,{state:e.state,onSelectNotebook:e.selectNotebook,onRemoveNotebook:e.removeNotebook,onUpdateNotebook:e.updateNthNotebook,onAddNotebook:e.addNotebook}):i===o.HELP?l.a.createElement(Be,null):i===o.SETTINGS?(console.log("settings"),l.a.createElement(je,{settings:s,updateSettings:e.updateSettings})):void 0)}},{key:"selectNotebook",value:function(e){this.setState({currentScreen:o.MAIN,currentNotebook:e}),W(Object(p.a)({},this.state,{currentScreen:o.MAIN,currentNotebook:e}))}},{key:"setScreen",value:function(e){console.log("set state screen ",e),this.setState({currentScreen:e})}},{key:"updateNotebook",value:function(e){console.log("??????????????????????????????????????"),console.log("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");var t=this.state,n=t.notebookList,a=t.currentNotebook;n[a]=Object(p.a)({},n[a],{},e),this.setState({notebookList:n}),K(n[a],a)}},{key:"updateNthNotebook",value:function(e,t){var n=this.state.notebookList;n[t]=e,this.setState({notebookList:n}),K(e,t)}},{key:"changeNotebook",value:function(e){this.setState({currentNotebook:e}),W(Object(p.a)({},this.state,{currentNotebook:e}))}},{key:"addNotebook",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setState({notebookList:[].concat(Object(d.a)(this.state.notebookList),[Re(e)]),currentNotebook:this.state.currentNotebook+1}),W(Object(p.a)({},this.state,{currentScreen:o.MAIN,notebookList:[].concat(Object(d.a)(this.state.notebookList),[Re(e)]),currentNotebook:this.state.currentNotebook+1}))}},{key:"importNotebook",value:function(e){this.setState({notebookList:[].concat(Object(d.a)(this.state.notebookList),[e]),currentNotebook:this.state.currentNotebook+1}),W(Object(p.a)({},this.state,{notebookList:[].concat(Object(d.a)(this.state.notebookList),[e]),currentNotebook:this.state.currentNotebook+1}))}},{key:"removeNotebook",value:function(e){var t,n=this.state,a=n.notebookList,o=n.currentNotebook,i=(t=e)<o?o-1:t>o?o:1===a.length?NaN:0===t?t:t-1;Number.isNaN(i)||(a.splice(e,1),this.setState({notebookList:a,currentNotebook:i}),W(Object(p.a)({},this.state,{notebookList:a,currentNotebook:i})))}},{key:"editNotebookName",value:function(e){var t=this.state.notebookList,n=t[e];t[e]=Object(p.a)({},n,{editingName:!0,persistent:!0}),this.setState({notebookList:t}),K(n,e)}},{key:"changeNotebookName",value:function(e,t){var n=this.state.notebookList,a=n[e];n[e]=Object(p.a)({},a,{name:t}),this.setState({notebookList:n}),K(a,e)}},{key:"stopEditingNotebook",value:function(e){var t=this.state.notebookList,n=t[e];t[e]=Object(p.a)({},n,{editingName:!1}),this.setState({notebookList:t}),K(n,e)}},{key:"updateSettings",value:function(e){var t,n=this.state,a=n.currentNotebook,o=n.notebookList;o[a].settings=e,this.setState({notebookList:Object(d.a)(o)}),t=e,window.localStorage.setItem("global-settings",JSON.stringify(t))}},{key:"clearWorkspace",value:function(){if(window.confirm("This will delete this whole Notebook from your browser's memory.\n\n                                          Are you sure?")){var e=this.state,t=e.currentNotebook,n=e.notebookList;n[t]=P,this.setState({notebookList:n}),K(P,t)}}}]),t}(c.Component);function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Anonymous Notebook";return{boxList:[],activeBoxIndex:NaN,focusedBoxIndex:void 0,allowedBoxes:M,settings:U(),integrationStates:{UNTYPED_LAMBDA:_},locked:!1,menuOpen:!1,__key:Date.now().toString(),name:e,editingName:!1,persistent:!0}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(l.a.createElement(we,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,n){},69:function(e,t,n){e.exports=n(246)},74:function(e,t,n){},75:function(e,t,n){}},[[69,1,2]]]);
//# sourceMappingURL=main.e160dc28.chunk.js.map